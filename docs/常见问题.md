# 常见编译问题

## 问题：s6502.c编译错误

### 错误信息
```
s6502.c:88:31: error: call to undeclared function 'sys_halt_p'
s6502.c:100:18: error: call to undeclared function 'READX8'
```

### 原因
`s6502.c` 不是独立文件，它被 `#include` 在 `libretro.c` 中。

### 解决方案
只编译 `libretro.c`：

```bash
# ✅ 正确
xcrun -sdk iphoneos clang -arch arm64 -dynamiclib \
    -o gam4980_libretro.dylib libretro.c

# ❌ 错误（不要包含s6502.c）
xcrun -sdk iphoneos clang ... libretro.c s6502.c
```

## 使用编译脚本

为避免错误，使用提供的脚本：

```bash
cd gam4980/src
cp ../../docs/build_ios.sh .
chmod +x build_ios.sh
./build_ios.sh
```

脚本会自动处理所有编译参数。